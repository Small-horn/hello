<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­›é€‰åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/management.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
        }
        
        .demo-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            overflow: hidden;
        }
        
        .demo-header {
            background: #f8f9fa;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .demo-content {
            padding: 1.5rem;
        }
        
        .test-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .mock-data-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .filter-demo {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” å…¬å‘Šç®¡ç†ç­›é€‰åŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•å…¬å‘Šç®¡ç†é¡µé¢çš„ç­›é€‰ã€æœç´¢å’Œæ¸…é™¤åŠŸèƒ½</p>
        
        <!-- ç­›é€‰å™¨æ¼”ç¤º -->
        <div class="demo-section">
            <div class="demo-header">
                <h3>1. ç­›é€‰å™¨ç»„ä»¶æ¼”ç¤º</h3>
            </div>
            <div class="demo-content">
                <div class="management-filter">
                    <div class="filter-group">
                        <label for="demo-status-filter">çŠ¶æ€ç­›é€‰ï¼š</label>
                        <select id="demo-status-filter" class="form-control">
                            <option value="">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="DRAFT">è‰ç¨¿</option>
                            <option value="PUBLISHED">å·²å‘å¸ƒ</option>
                            <option value="CANCELLED">å·²å–æ¶ˆ</option>
                            <option value="EXPIRED">å·²è¿‡æœŸ</option>
                        </select>

                        <label for="demo-type-filter">ç±»å‹ç­›é€‰ï¼š</label>
                        <select id="demo-type-filter" class="form-control">
                            <option value="">å…¨éƒ¨ç±»å‹</option>
                            <option value="ANNOUNCEMENT">å…¬å‘Š</option>
                            <option value="ACTIVITY">æ´»åŠ¨</option>
                        </select>

                        <div class="search-group">
                            <input type="text" id="demo-search-input" placeholder="æœç´¢æ ‡é¢˜..." class="search-input">
                            <button id="demo-search-btn" class="search-btn">
                                <i class="fas fa-search"></i>
                            </button>
                            <button id="demo-clear-search-btn" class="clear-search-btn" title="æ¸…é™¤æœç´¢">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ç­›é€‰çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ -->
                <div id="demo-filter-status-container"></div>
            </div>
        </div>

        <!-- åŠŸèƒ½æµ‹è¯• -->
        <div class="demo-section">
            <div class="demo-header">
                <h3>2. åŠŸèƒ½æµ‹è¯•</h3>
            </div>
            <div class="demo-content">
                <div class="test-controls">
                    <button onclick="testStatusFilter()" class="btn btn-primary">
                        <i class="fas fa-filter"></i> æµ‹è¯•çŠ¶æ€ç­›é€‰
                    </button>
                    <button onclick="testTypeFilter()" class="btn btn-success">
                        <i class="fas fa-tags"></i> æµ‹è¯•ç±»å‹ç­›é€‰
                    </button>
                    <button onclick="testSearch()" class="btn btn-info">
                        <i class="fas fa-search"></i> æµ‹è¯•æœç´¢åŠŸèƒ½
                    </button>
                    <button onclick="testCombinedFilter()" class="btn btn-warning">
                        <i class="fas fa-layer-group"></i> æµ‹è¯•ç»„åˆç­›é€‰
                    </button>
                    <button onclick="clearAllDemoFilters()" class="btn btn-secondary">
                        <i class="fas fa-eraser"></i> æ¸…é™¤æ‰€æœ‰ç­›é€‰
                    </button>
                </div>
                
                <div class="mock-data-info">
                    <h5><i class="fas fa-info-circle"></i> æ¨¡æ‹Ÿæ•°æ®è¯´æ˜</h5>
                    <p>æµ‹è¯•ä½¿ç”¨ä»¥ä¸‹æ¨¡æ‹Ÿæ•°æ®ï¼š</p>
                    <ul>
                        <li><strong>çŠ¶æ€</strong>: è‰ç¨¿(2æ¡)ã€å·²å‘å¸ƒ(3æ¡)ã€å·²å–æ¶ˆ(1æ¡)ã€å·²è¿‡æœŸ(1æ¡)</li>
                        <li><strong>ç±»å‹</strong>: å…¬å‘Š(4æ¡)ã€æ´»åŠ¨(3æ¡)</li>
                        <li><strong>å…³é”®è¯</strong>: åŒ…å«"è€ƒè¯•"ã€"æ´»åŠ¨"ã€"é€šçŸ¥"ç­‰å…³é”®è¯</li>
                    </ul>
                </div>
                
                <div id="test-result" class="filter-demo" style="display: none;">
                    <h5>æµ‹è¯•ç»“æœï¼š</h5>
                    <div id="test-output"></div>
                </div>
            </div>
        </div>

        <!-- æ¨¡æ‹Ÿæ•°æ®è¡¨æ ¼ -->
        <div class="demo-section">
            <div class="demo-header">
                <h3>3. ç­›é€‰ç»“æœå±•ç¤º</h3>
            </div>
            <div class="demo-content">
                <div class="table-container">
                    <table class="management-table">
                        <thead>
                            <tr>
                                <th>æ ‡é¢˜</th>
                                <th>ç±»å‹</th>
                                <th>çŠ¶æ€</th>
                                <th>å‘å¸ƒè€…</th>
                                <th>å‘å¸ƒæ—¶é—´</th>
                            </tr>
                        </thead>
                        <tbody id="demo-table-body">
                            <!-- åŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
                
                <div id="demo-empty-state" style="display: none; text-align: center; padding: 2rem; color: #6c757d;">
                    <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <p>æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®</p>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½è¯´æ˜ -->
        <div class="demo-section">
            <div class="demo-header">
                <h3>4. åŠŸèƒ½è¯´æ˜</h3>
            </div>
            <div class="demo-content">
                <h5>âœ¨ å·²å®ç°çš„åŠŸèƒ½</h5>
                <ul>
                    <li><strong>çŠ¶æ€ç­›é€‰</strong>: æŒ‰å…¬å‘ŠçŠ¶æ€ï¼ˆè‰ç¨¿ã€å·²å‘å¸ƒã€å·²å–æ¶ˆã€å·²è¿‡æœŸï¼‰ç­›é€‰</li>
                    <li><strong>ç±»å‹ç­›é€‰</strong>: æŒ‰å†…å®¹ç±»å‹ï¼ˆå…¬å‘Šã€æ´»åŠ¨ï¼‰ç­›é€‰</li>
                    <li><strong>å…³é”®è¯æœç´¢</strong>: åœ¨æ ‡é¢˜ä¸­æœç´¢å…³é”®è¯</li>
                    <li><strong>ç»„åˆç­›é€‰</strong>: æ”¯æŒå¤šä¸ªç­›é€‰æ¡ä»¶åŒæ—¶ä½¿ç”¨</li>
                    <li><strong>ç­›é€‰çŠ¶æ€æ˜¾ç¤º</strong>: å®æ—¶æ˜¾ç¤ºå½“å‰ç­›é€‰æ¡ä»¶</li>
                    <li><strong>ä¸€é”®æ¸…é™¤</strong>: å¿«é€Ÿæ¸…é™¤æ‰€æœ‰ç­›é€‰æ¡ä»¶</li>
                    <li><strong>å‰ç«¯ç­›é€‰</strong>: æœç´¢ç»“æœçš„äºŒæ¬¡ç­›é€‰</li>
                </ul>
                
                <h5>ğŸ”§ æŠ€æœ¯å®ç°</h5>
                <ul>
                    <li><strong>åç«¯API</strong>: æ”¯æŒçŠ¶æ€å’Œç±»å‹å‚æ•°çš„åˆ†é¡µæŸ¥è¯¢</li>
                    <li><strong>æœç´¢æ¥å£</strong>: ç‹¬ç«‹çš„æœç´¢APIï¼Œæ”¯æŒå…³é”®è¯æŸ¥è¯¢</li>
                    <li><strong>å‰ç«¯ç­›é€‰</strong>: å¯¹æœç´¢ç»“æœè¿›è¡Œå®¢æˆ·ç«¯ç­›é€‰</li>
                    <li><strong>çŠ¶æ€ç®¡ç†</strong>: JavaScriptå˜é‡ç®¡ç†ç­›é€‰çŠ¶æ€</li>
                    <li><strong>UIåé¦ˆ</strong>: å®æ—¶æ›´æ–°ç­›é€‰çŠ¶æ€æ˜¾ç¤º</li>
                </ul>
                
                <h5>ğŸ“± ç”¨æˆ·ä½“éªŒ</h5>
                <ul>
                    <li><strong>å³æ—¶åé¦ˆ</strong>: ç­›é€‰æ¡ä»¶æ”¹å˜æ—¶ç«‹å³æ›´æ–°ç»“æœ</li>
                    <li><strong>çŠ¶æ€æç¤º</strong>: æ¸…æ¥šæ˜¾ç¤ºå½“å‰ç­›é€‰æ¡ä»¶</li>
                    <li><strong>å¿«é€Ÿæ¸…é™¤</strong>: ä¸€é”®æ¸…é™¤æ‰€æœ‰ç­›é€‰</li>
                    <li><strong>å“åº”å¼è®¾è®¡</strong>: é€‚é…ç§»åŠ¨è®¾å¤‡</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const mockData = [
            { id: 1, title: 'æœŸæœ«è€ƒè¯•å®‰æ’é€šçŸ¥', type: 'ANNOUNCEMENT', status: 'PUBLISHED', publisher: 'æ•™åŠ¡å¤„', publishTime: '2024-01-15 10:00' },
            { id: 2, title: 'æ ¡å›­æ–‡åŒ–èŠ‚æ´»åŠ¨æŠ¥å', type: 'ACTIVITY', status: 'PUBLISHED', publisher: 'å­¦ç”Ÿä¼š', publishTime: '2024-01-14 14:30' },
            { id: 3, title: 'å›¾ä¹¦é¦†é—­é¦†é€šçŸ¥', type: 'ANNOUNCEMENT', status: 'CANCELLED', publisher: 'å›¾ä¹¦é¦†', publishTime: '2024-01-13 09:15' },
            { id: 4, title: 'ç¤¾å›¢æ‹›æ–°æ´»åŠ¨', type: 'ACTIVITY', status: 'EXPIRED', publisher: 'ç¤¾å›¢è”åˆä¼š', publishTime: '2024-01-12 16:20' },
            { id: 5, title: 'å­¦æœ¯è®²åº§é¢„å‘Š', type: 'ANNOUNCEMENT', status: 'DRAFT', publisher: 'å­¦æœ¯éƒ¨', publishTime: '2024-01-11 11:45' },
            { id: 6, title: 'ä½“è‚²æ¯”èµ›æŠ¥å', type: 'ACTIVITY', status: 'PUBLISHED', publisher: 'ä½“è‚²éƒ¨', publishTime: '2024-01-10 13:30' },
            { id: 7, title: 'è¯¾ç¨‹è°ƒæ•´é€šçŸ¥', type: 'ANNOUNCEMENT', status: 'DRAFT', publisher: 'æ•™åŠ¡å¤„', publishTime: '2024-01-09 08:00' }
        ];

        let currentData = [...mockData];
        let currentStatus = '';
        let currentType = '';
        let currentKeyword = '';

        // çŠ¶æ€å’Œç±»å‹æ˜ å°„
        const statusMap = {
            'DRAFT': 'è‰ç¨¿',
            'PUBLISHED': 'å·²å‘å¸ƒ',
            'CANCELLED': 'å·²å–æ¶ˆ',
            'EXPIRED': 'å·²è¿‡æœŸ'
        };

        const typeMap = {
            'ANNOUNCEMENT': 'å…¬å‘Š',
            'ACTIVITY': 'æ´»åŠ¨'
        };

        // åˆå§‹åŒ–
        $(document).ready(function() {
            renderTable();
            bindEvents();
        });

        function bindEvents() {
            $('#demo-status-filter').change(applyFilters);
            $('#demo-type-filter').change(applyFilters);
            $('#demo-search-btn').click(applyFilters);
            $('#demo-clear-search-btn').click(clearSearch);
            $('#demo-search-input').keypress(function(e) {
                if (e.which === 13) applyFilters();
            });
        }

        function applyFilters() {
            currentStatus = $('#demo-status-filter').val();
            currentType = $('#demo-type-filter').val();
            currentKeyword = $('#demo-search-input').val().trim();

            // ç­›é€‰æ•°æ®
            currentData = mockData.filter(item => {
                let matches = true;

                if (currentStatus && item.status !== currentStatus) {
                    matches = false;
                }

                if (currentType && item.type !== currentType) {
                    matches = false;
                }

                if (currentKeyword && !item.title.toLowerCase().includes(currentKeyword.toLowerCase())) {
                    matches = false;
                }

                return matches;
            });

            renderTable();
            updateFilterStatus();
        }

        function clearSearch() {
            $('#demo-search-input').val('');
            applyFilters();
        }

        function clearAllDemoFilters() {
            currentStatus = '';
            currentType = '';
            currentKeyword = '';

            $('#demo-status-filter').val('');
            $('#demo-type-filter').val('');
            $('#demo-search-input').val('');

            currentData = [...mockData];
            renderTable();
            updateFilterStatus();
        }

        function renderTable() {
            const tbody = $('#demo-table-body');
            const emptyState = $('#demo-empty-state');

            if (currentData.length === 0) {
                tbody.empty();
                emptyState.show();
                return;
            }

            emptyState.hide();
            tbody.empty();

            currentData.forEach(item => {
                const row = `
                    <tr>
                        <td>${item.title}</td>
                        <td><span class="type-badge ${item.type.toLowerCase()}">${typeMap[item.type]}</span></td>
                        <td><span class="status-badge ${item.status.toLowerCase()}">${statusMap[item.status]}</span></td>
                        <td>${item.publisher}</td>
                        <td>${item.publishTime}</td>
                    </tr>
                `;
                tbody.append(row);
            });
        }

        function updateFilterStatus() {
            const container = $('#demo-filter-status-container');
            const filterInfo = [];

            if (currentStatus) {
                filterInfo.push(`çŠ¶æ€: ${statusMap[currentStatus]}`);
            }
            if (currentType) {
                filterInfo.push(`ç±»å‹: ${typeMap[currentType]}`);
            }
            if (currentKeyword) {
                filterInfo.push(`æœç´¢: "${currentKeyword}"`);
            }

            if (filterInfo.length > 0) {
                const statusHtml = `
                    <div class="filter-status">
                        <span class="filter-label">å½“å‰ç­›é€‰ï¼š</span>
                        <span class="filter-items">${filterInfo.join(' | ')}</span>
                        <button class="clear-filters-btn" onclick="clearAllDemoFilters()">
                            <i class="fas fa-times"></i> æ¸…é™¤ç­›é€‰
                        </button>
                    </div>
                `;
                container.html(statusHtml);
            } else {
                container.empty();
            }
        }

        // æµ‹è¯•å‡½æ•°
        function testStatusFilter() {
            $('#demo-status-filter').val('PUBLISHED');
            applyFilters();
            showTestResult(`çŠ¶æ€ç­›é€‰æµ‹è¯•ï¼šç­›é€‰å‡º ${currentData.length} æ¡å·²å‘å¸ƒçš„è®°å½•`);
        }

        function testTypeFilter() {
            clearAllDemoFilters();
            $('#demo-type-filter').val('ACTIVITY');
            applyFilters();
            showTestResult(`ç±»å‹ç­›é€‰æµ‹è¯•ï¼šç­›é€‰å‡º ${currentData.length} æ¡æ´»åŠ¨è®°å½•`);
        }

        function testSearch() {
            clearAllDemoFilters();
            $('#demo-search-input').val('æ´»åŠ¨');
            applyFilters();
            showTestResult(`æœç´¢åŠŸèƒ½æµ‹è¯•ï¼šæœç´¢"æ´»åŠ¨"æ‰¾åˆ° ${currentData.length} æ¡è®°å½•`);
        }

        function testCombinedFilter() {
            clearAllDemoFilters();
            $('#demo-status-filter').val('PUBLISHED');
            $('#demo-type-filter').val('ANNOUNCEMENT');
            applyFilters();
            showTestResult(`ç»„åˆç­›é€‰æµ‹è¯•ï¼šå·²å‘å¸ƒçš„å…¬å‘Šæœ‰ ${currentData.length} æ¡è®°å½•`);
        }

        function showTestResult(message) {
            $('#test-output').text(message);
            $('#test-result').show();
            
            setTimeout(() => {
                $('#test-result').fadeOut();
            }, 3000);
        }

        // å¯¼å‡ºå‡½æ•°ä¾›HTMLè°ƒç”¨
        window.clearAllDemoFilters = clearAllDemoFilters;
    </script>
</body>
</html>
